---
title: kFrame总结
date: 2022-01-14 15:55:03 
permalink: /k-frame-learning/ 
id: k-frame-learning
categories:
  - 前端 
tags:
  - 前端
  - Vue
---



# kFrame 总结

在k公司做了挺久，我想总结一下k公司的前端框架

## KeepAlive

```vue
    <transition name="fade-transform" mode="out-in">
        <keep-alive :include="keepAliveIncludeList" v-if="customize.keepAliveMode">
            <router-view :key="key"></router-view>
        </keep-alive>
        <keep-alive :exclude="keepAliveExcludeList" :max="customize.keepAliveMax" v-else>
            <router-view :key="key"></router-view>
        </keep-alive>
    </transition>
```

将`keepAliveIncludeList`、`keepAliveExcludeList`放在vuex中，并且根据配置来切换keepAlive的模式，每次切换模式都会清空缓存（因为 v-if 和 v-else 的变换）。

## 如何保证配置都被读取后进行页面加载

```js
Global.init().then(async () => {
  new Vue({
    el: '#app',
    router: router,
    store: store,
    render: h => h(App)
  });
}).catch((err) => {
  console.error('global init err' + err);
});
```

通过全局的init方法读取配置，然后再 new Vue 实例。

## 全局工具的提供

```js
import Global from 'utils/global';
```

框架中会这样使用 Global、Utils等工具类函数。

同时框架提供了默认的utils。

为了使用框架的utils需要在项目中，创建utils/global.js：

```js
/** global.js **/
import global from 'kframe/utils/global';

// 自定义 或者 覆盖 global 上的方法
// global.xxx = () => {}

export default global;
```

## 换肤

每种样式需要写一套，分别放在light、dark目录下面。

编译的时候，使用gulp将样式分别编译到 static/light 、 static/dark 目录下面。

初始化的时候，加入`<style>`标签；

换肤：改变`<style>`路径中的dark、light关键词

gulp 编译使用的插件 `gulp-px2rem-plugin` `gulp-sass` `gulp-autoprefixer`   `gulp-cssmin` `node-sass-tilde-importer`
